{"version":3,"file":"zoom-area.component.js","sourceRoot":"","sources":["../../src/zoom-area.component.ts"],"names":[],"mappings":"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","sourcesContent":["import { Component, ViewChild, Input, Output, EventEmitter, OnChanges, SimpleChanges } from '@angular/core';\nimport { trigger, state, style, transition, animate } from '@angular/animations';\nimport { Gesture, Content, RootNode } from 'ionic-angular';\nimport { ZoomAreaProvider } from './zoom-area.provider';\n\n@Component({\n  selector: 'zoom-area',\n  template: `\n    <ion-content>\n      <div #zoomAreaRoot class=\"zoom\" (click)=\"toggleZoomControls()\">\n        <div class=\"fit\">\n          <ng-content></ng-content>\n        </div>\n      </div>\n\n      <ion-fab right top [@visibilityChanged]=\"zoomControlsState\">\n        <button (click)=\"zoomIn()\" ion-fab color=\"primary\" class=\"btn-zoom\">\n            <ion-icon name=\"add-circle\"></ion-icon>\n        </button>\n\n        <button (click)=\"zoomOut()\" ion-fab color=\"primary\" class=\"btn-zoom\">\n            <ion-icon name=\"remove-circle\"></ion-icon>\n        </button>\n\n        <button (click)=\"zoomReset()\" ion-fab color=\"primary\" class=\"btn-zoom\">\n            <ion-icon name=\"md-contract\"></ion-icon>\n        </button>\n      </ion-fab>\n    </ion-content>\n`,\n  animations: [\n    trigger('visibilityChanged', [\n      state('shown', style({ opacity: 1, display: 'block' })),\n      state('hidden', style({ opacity: 0, display: 'none' })),\n      transition('shown => hidden', animate('300ms')),\n      transition('hidden => shown', animate('300ms')),\n    ])\n  ]\n})\nexport class ZoomAreaComponent implements OnChanges {\n  @ViewChild('zoomAreaRoot') zoom;\n  @ViewChild(Content) content: Content;\n\n  @Output() afterZoomIn = new EventEmitter<any>();\n  @Output() afterZoomOut = new EventEmitter<any>();\n\n  @Input() controls: boolean;\n  @Output() controlsChanged = new EventEmitter<boolean>();\n\n  @Input() scale: number;\n  @Output() scaleChanged = new EventEmitter<number>();\n\n  zoomControlsState;\n  zoomRootElement;\n  gesture;\n\n  constructor(\n    public zoomAreaProvider: ZoomAreaProvider\n  ) {\n    this.zoomControlsState = 'hidden';\n  }\n\n  ngOnChanges(changes: SimpleChanges) {\n    if ('controls' in changes) {\n      let showControls = changes['controls'];\n\n      if (showControls && showControls.currentValue) {\n        this.zoomControlsState = 'shown';\n      } else {\n        this.zoomControlsState = 'hidden';\n      }\n    }\n\n    if ('scale' in changes) {\n      let scaleValue = changes['scale'];\n      if (scaleValue && scaleValue.currentValue && scaleValue.currentValue === 1) {\n        this.zoomReset();\n      }\n    }\n  }\n\n  ngAfterViewInit() {\n    this.content.ionScroll.subscribe((data) => {\n      this.zoomAreaProvider.notifyScroll(data);\n    });\n\n    this._pinchZoom(this.zoom.nativeElement, this.content);\n\n    // Watch for user setCenter call\n    let self = this;\n    this.zoomAreaProvider.centerChanged$.subscribe(coords => {\n      if (self.zoomConfig.scale === 1) {\n        return;\n      }\n\n      self.setCoor(coords.x, coords.y);\n      self.transform(coords.x, coords.y);\n    });\n  }\n\n  zoomConfig = {\n    original_x: 0,\n    original_y: 0,\n    max_x: 0,\n    max_y: 0,\n    x: 0,\n    y: 0,\n    last_x: 0,\n    last_y: 0,\n    scale: 1,\n    last_scale: 1,\n    max_scale: 4,\n    min_scale: 1,\n    header_height: 56\n  };\n\n  toggleZoomControls() {\n    // this.zoomControlsState = this.zoomControlsState === 'shown' ? 'hidden' : 'shown';\n    this.zoomControlsState = 'hidden';\n  }\n\n  zoomIn() {\n    this.zoomConfig.scale += 1;\n\n    if (this.zoomConfig.scale > 1) {\n      this.zoomAreaProvider.notifyScrollState(this.zoomAreaProvider.SCROLL_STATE.COLAPSED);\n    }\n\n    if (this.zoomConfig.scale > this.zoomConfig.max_scale) {\n      this.zoomConfig.scale = this.zoomConfig.max_scale;\n    }\n\n    this.transform();\n    this.afterZoomIn.emit();\n  }\n\n  zoomOut(reset?) {\n    if (!this.zoomRootElement) {\n      return;\n    }\n\n    this.zoomConfig.scale -= 1;\n\n    if (this.zoomConfig.scale < this.zoomConfig.min_scale) {\n      this.zoomConfig.scale = this.zoomConfig.min_scale;\n    }\n\n    if (this.zoomConfig.scale === this.zoomConfig.min_scale) {\n      reset = true;\n      this.zoomAreaProvider.notifyScrollState(this.zoomAreaProvider.SCROLL_STATE.NORMAL);\n    }\n\n    reset ? this.transform(0.1, 0.1) : this.transform();\n\n    this.afterZoomOut.emit();\n  }\n\n  zoomReset() {\n    this.zoomConfig.scale = this.zoomConfig.min_scale;\n    if (this.content && this.content.scrollTop) {\n      this.content.scrollTop = 0;\n    }\n    this.zoomOut(true);\n  }\n\n  private _pinchZoom(elm: HTMLElement, content: Content): void {\n    this.zoomRootElement = elm;\n    this.gesture = new Gesture(this.zoomRootElement);\n\n    this.zoomConfig.original_x = this.zoom.nativeElement.clientWidth;\n    this.zoomConfig.original_y = this.zoom.nativeElement.clientHeight;\n    let headers = document.getElementsByTagName(\"ion-header\");\n    let header_height = headers[headers.length - 1].clientHeight;\n    if (this.zoomConfig.header_height !== header_height) {\n      console.warn(\"header is not default height\");\n    }\n    this.zoomConfig.header_height = header_height;\n    this.zoomConfig.max_x = this.zoomConfig.original_x;\n    this.zoomConfig.max_y = this.zoomConfig.original_y;\n    this.zoomConfig.last_scale = this.zoomConfig.scale;\n\n    this.gesture.listen();\n    this.gesture.on('pan', this.onPan.bind(this));\n    this.gesture.on('panend', this.onPanend.bind(this));\n    this.gesture.on('pancancel', this.onPanend.bind(this));\n    this.gesture.on('doubletap', this.onDoubleTap.bind(this));\n    // this.gesture.on('tap', this.onTap.bind(this));\n    this.gesture.on('pinch', this.onPinch.bind(this));\n    this.gesture.on('pinchend', this.onPinchend.bind(this));\n    this.gesture.on('pinchcancel', this.onPinchend.bind(this));\n  }\n\n  onPan(ev) {\n    this.setCoor(ev.deltaX, ev.deltaY);\n    this.setBounds();\n    this.transform();\n  }\n\n  onPanend() {\n    this.zoomConfig.last_x = this.zoomConfig.x < this.zoomConfig.max_x ? this.zoomConfig.x : this.zoomConfig.max_x;\n    this.zoomConfig.last_y = this.zoomConfig.y < this.zoomConfig.max_y ? this.zoomConfig.y : this.zoomConfig.max_y;\n  }\n\n  onTap(ev) {\n  }\n\n  onDoubleTap(ev) {\n    this.zoomConfig.last_x = 0;\n    this.zoomConfig.last_y = 0;\n    this.setCoor(0, 0);\n    this.zoomConfig.scale = 1;\n    this.zoomConfig.last_scale = 1;\n    this.setBounds();\n    this.transform();\n  }\n\n  // TODO- I thought the h should be the element's scrollHeight, howeverthe now it is only working on original_y\n  // Maybe it is becasue of the css settings\n  // zoom-area .zoom {\n  // width: 100% !important;\n  // height: 100% !important;\n  // }\n  // Changing this may affect other stuff\n  onPinch(ev) {\n    let z = this.zoomConfig;\n    let last_scale = z.scale\n    z.scale = Math.max(z.min_scale, Math.min(z.last_scale * ev.scale, z.max_scale));\n\n    //Vector Focusing Feature\n    //(a,b) is the new (x,y) after rectangle center scalling by k\n    // a = k(x-w/2)+w/2\n    // b = k(x-h/2)+h/2\n    let k = z.scale / last_scale\n    let x = ev.center.x;\n    let y = ev.center.y - z.header_height - z.y;\n\n    let a = k * (x - z.original_x / 2) + z.original_x / 2;\n    let b = k * (y - z.original_y / 2) + z.original_y / 2;\n\n    let dx = a - x;\n    let dy = b - y;\n\n    z.x = z.x - dx;\n    z.y = z.y - dy;\n\n    this.setBounds();\n    this.transform();\n  }\n\n  onPinchend(ev) {\n    let z = this.zoomConfig;\n    z.last_scale = z.scale;\n    z.last_x = z.x;\n    z.last_y = z.y;\n  }\n\n  setBounds() {\n    // optimise scale 1 instance\n    let z = this.zoomConfig;\n\n    if (z.scale == 1) {\n      z.x = 0;\n      if (z.y >= 0) {\n        z.y = 0;\n      } else {\n        z.max_y = this.zoom.nativeElement.scrollHeight - this.zoom.nativeElement.clientHeight + z.header_height * 2;\n        if (z.y < -z.max_y) {\n          z.y = -z.max_y;\n        }\n      }\n    } else {\n      z.max_x = Math.ceil(this.zoom.nativeElement.clientWidth * (z.scale - 1) / 2);\n      if (z.x < -z.max_x) {\n        z.x = -z.max_x;\n      } else if (z.x > z.max_x) {\n        z.x = z.max_x;\n      }\n      z.max_y = Math.ceil(z.scale * this.zoom.nativeElement.scrollHeight - this.zoom.nativeElement.clientHeight * (z.scale + 1) / 2) + z.header_height * 2;\n      var y_top_offset = Math.ceil(this.zoom.nativeElement.clientHeight * (z.scale - 1) / 2);\n      if (z.y < -z.max_y) {\n        z.y = -z.max_y;\n      } else if (z.y > y_top_offset) {\n        z.y = y_top_offset\n      }\n    }\n  }\n\n  setCoor(xx: number, yy: number) {\n    this.zoomConfig.x = this.zoomConfig.last_x + xx;\n    this.zoomConfig.y = this.zoomConfig.last_y + yy;\n  }\n\n  transform(xx?: number, yy?: number) {\n    this.zoomRootElement.style.transform = `translate3d(${xx || this.zoomConfig.x}px, ${yy || this.zoomConfig.y}px, 0) scale3d(${this.zoomConfig.scale}, ${this.zoomConfig.scale}, 1)`;\n  }\n}\n"]}